<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOC - Graduation Ceremony 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
    <style>
        /* --- Base & Theme Colors --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { 
            --neon-cyan: #00ffff; 
            --neon-magenta: #ff00ff;
            --neon-green: #00ff88;
            --dark-bg: #000; 
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--dark-bg);
            color: #fff;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
        }

        /* --- Click Overlay (สำหรับบังคับให้คลิก) --- */
        #clickOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            animation: pulse 2s ease-in-out infinite;
        }
        
        #clickOverlay.hidden {
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        .click-prompt {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(1.5rem, 5vw, 3rem);
            color: var(--neon-cyan);
            text-shadow: 0 0 20px var(--neon-cyan);
            margin-bottom: 20px;
            text-align: center;
            padding: 0 20px;
        }

        .click-icon {
            width: 80px;
            height: 80px;
            border: 3px solid var(--neon-magenta);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            animation: clickPulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { background: rgba(0, 0, 0, 0.95); }
            50% { background: rgba(0, 0, 0, 0.98); }
        }

        @keyframes clickPulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 0 20px var(--neon-magenta);
            }
            50% { 
                transform: scale(1.1);
                box-shadow: 0 0 40px var(--neon-magenta);
            }
        }

        /* --- Background & Canvas --- */
        .grid-background {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: 
                linear-gradient(0deg, transparent 24%, rgba(0, 255, 255, 0.05) 25%, rgba(0, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(0, 255, 255, 0.05) 75%, rgba(0, 255, 255, 0.05) 76%, transparent 77%, transparent),
                linear-gradient(90deg, transparent 24%, rgba(0, 255, 255, 0.05) 25%, rgba(0, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(0, 255, 255, 0.05) 75%, rgba(0, 255, 255, 0.05) 76%, transparent 77%, transparent);
            background-size: 50px 50px;
            animation: gridMove 20s linear infinite;
            z-index: 1;
        }
        @keyframes gridMove {
            0% { transform: perspective(500px) rotateX(60deg) translateY(0); }
            100% { transform: perspective(500px) rotateX(60deg) translateY(50px); }
        }

        canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        #matrixCanvas { z-index: 3; opacity: 0.5; }
        #particles { z-index: 4; opacity: 0.4; }

        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, transparent 15%, rgba(0,0,0,0.85) 90%);
            z-index: 6; pointer-events: none;
        }

        /* --- Main UI --- */
        .container {
            position: relative; z-index: 10;
            width: 100%; min-height: 100vh;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            padding: 20px;
        }

        .profile-container { 
            position: relative; 
            width: clamp(160px, 40vw, 260px); 
            height: clamp(160px, 40vw, 260px); 
            margin-bottom: 20px; 
        }
        .hexagon {
            width: 100%; height: 100%;
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            background: linear-gradient(135deg, var(--neon-cyan), var(--neon-magenta), var(--neon-green));
            padding: 3px; animation: neonPulse 2.5s ease-in-out infinite;
        }
        .hexagon-inner {
            width: 100%; height: 100%; background: #000;
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            display: flex; justify-content: center; align-items: center; overflow: hidden;
        }
        .profile-image { width: 98%; height: 98%; object-fit: cover; clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
        
        @keyframes neonPulse { 0%, 100% { filter: drop-shadow(0 0 10px var(--neon-cyan)); } 50% { filter: drop-shadow(0 0 20px var(--neon-magenta)); } }

        .glitch {
            font-family: 'Orbitron', sans-serif; 
            font-size: clamp(1.8rem, 8vw, 4.5rem); 
            font-weight: 900; text-align: center;
            background: linear-gradient(90deg, var(--neon-cyan), var(--neon-magenta), var(--neon-green), var(--neon-cyan));
            background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            animation: gradientShift 4s linear infinite;
        }
        .holo-text { 
            font-size: clamp(0.9rem, 4vw, 1.5rem); 
            letter-spacing: 0.2em; margin-bottom: 25px; color: var(--neon-cyan); text-align: center;
        }

        .info-container { 
            display: flex; gap: 10px; flex-direction: column;
            width: 100%; max-width: 450px; margin-bottom: 25px; 
        }
        @media (min-width: 600px) { .info-container { flex-direction: row; } }

        .info-panel {
            flex: 1; background: rgba(0, 255, 255, 0.07); border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px; padding: 15px; text-align: center; backdrop-filter: blur(5px);
        }
        .info-label { font-size: 0.7rem; color: var(--neon-cyan); text-transform: uppercase; }
        .info-value { font-size: 1.1rem; font-weight: 700; }

        .terminal {
            background: rgba(0, 0, 0, 0.8); border: 1px solid var(--neon-green);
            border-radius: 6px; padding: 15px; width: 100%; max-width: 500px;
            font-size: 0.8rem; line-height: 1.5; color: #fff;
        }
        .terminal span { color: var(--neon-green); }

        .audio-control {
            position: fixed; bottom: 20px; right: 20px; width: 55px; height: 55px;
            background: rgba(0, 255, 255, 0.15); border: 2px solid var(--neon-cyan);
            border-radius: 50%; display: flex; justify-content: center; align-items: center;
            cursor: pointer; z-index: 100; backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        .audio-control:hover {
            background: rgba(0, 255, 255, 0.3);
            box-shadow: 0 0 20px var(--neon-cyan);
        }
        @keyframes gradientShift { 0% { background-position: 0% 50%; } 100% { background-position: 200% 50%; } }
    </style>
</head>
<body>

    <!-- Click Overlay สำหรับบังคับให้มีการคลิกก่อน -->
    <div id="clickOverlay">
        <div class="click-prompt">CLICK TO ENTER</div>
        <div class="click-icon">
            <svg viewBox="0 0 24 24" width="40" fill="#ff00ff">
                <path d="M8 5v14l11-7z"/>
            </svg>
        </div>
    </div>

    <div class="grid-background"></div>
    <canvas id="matrixCanvas"></canvas>
    <canvas id="particles"></canvas>
    <div class="overlay"></div>

    <div class="container">
        <div class="profile-container">
            <div class="hexagon">
                <div class="hexagon-inner">
                    <img src="img/k2.jpg" alt="Profile" class="profile-image">
                </div>
            </div>
        </div>

        <h1 class="glitch">GRADUATION</h1>
        <p class="holo-text">CEREMONY 2026</p>

        <div class="info-container">
            <div class="info-panel">
                <div class="info-label">DATE</div>
                <div class="info-value">22 FEB 2026</div>
            </div>
            <div class="info-panel">
                <div class="info-label">TIME</div>
                <div class="info-value">09:00 - 15:00</div>
            </div>
        </div>

        <div class="terminal">
            <div style="color: var(--neon-green); font-weight: bold;">// CELEBRATION_PROTOCOL: ACTIVE</div>
            > วิทยาลัยเทคโนโลยีโปลิเทคนิคลานนา<br>
            > Status: <span>OPERATIONAL</span><br>
            > Uptime: <span id="timer" style="color: var(--neon-magenta);">00:00:00</span>
        </div>
    </div>

    <div class="audio-control" id="audioBtn">
        <svg id="audioIcon" viewBox="0 0 24 24" width="30" fill="#00ffff"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
    </div>
    
    <!-- ใช้ muted autoplay แล้วค่อย unmute หลังคลิก -->
    <audio id="bgMusic" loop muted autoplay>
        <source src="mp3/s.mp3" type="audio/mpeg">
    </audio>

<script>
    const mCanvas = document.getElementById('matrixCanvas');
    const mCtx = mCanvas.getContext('2d');
    const pCanvas = document.getElementById('particles');
    const pCtx = pCanvas.getContext('2d');
    let drops = [];

    function init() {
        mCanvas.width = window.innerWidth; mCanvas.height = window.innerHeight;
        pCanvas.width = window.innerWidth; pCanvas.height = window.innerHeight;
        const columns = Math.floor(window.innerWidth / 50);
        drops = Array(columns).fill(0).map(() => ({ y: Math.random() * -50, ip: `192.168.${Math.floor(Math.random()*255)}` }));
    }

    function draw() {
        mCtx.fillStyle = 'rgba(0, 0, 0, 0.1)'; mCtx.fillRect(0, 0, mCanvas.width, mCanvas.height);
        mCtx.font = `14px "JetBrains Mono"`;
        drops.forEach((d, i) => {
            mCtx.fillStyle = (d.y > 20) ? '#ff00ff' : '#00ffff';
            mCtx.fillText(d.ip, i * 50, d.y * 14);
            if (d.y * 14 > mCanvas.height && Math.random() > 0.975) d.y = 0;
            d.y += 0.5;
        });
        requestAnimationFrame(draw);
    }

    // --- เทคนิค Autoplay ที่ทำงานได้กับทุก Browser ---
    const audio = document.getElementById('bgMusic');
    const audioBtn = document.getElementById('audioBtn');
    const audioIcon = document.getElementById('audioIcon');
    const clickOverlay = document.getElementById('clickOverlay');
    const START_TIME = 24;

    let audioStarted = false;

    // ฟังก์ชันเริ่มเพลงจริงๆ
    function startAudio() {
        if (audioStarted) return;
        audioStarted = true;

        // ตั้งเวลาเริ่มต้น
        audio.currentTime = START_TIME;
        
        // เปิดเสียง (unmute)
        audio.muted = false;
        
        // เล่นเพลง
        audio.play().then(() => {
            console.log('Audio playing successfully!');
            // เปลี่ยนไอคอนเป็น Pause
            audioIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
            // ซ่อน overlay
            clickOverlay.classList.add('hidden');
        }).catch(err => {
            console.error('Audio play failed:', err);
        });
    }

    // เทคนิค 1: ใช้ muted autoplay (Chrome/Safari อนุญาต)
    // เพลงจะเล่นแบบ muted อยู่แล้ว (ดู HTML)
    
    // เทคนิค 2: ลองเล่นเสียงทันทีเมื่อโหลดเสร็จ
    window.addEventListener('load', () => {
        // ลองเล่นแบบไม่ mute (บาง browser อาจอนุญาต)
        audio.muted = false;
        audio.currentTime = START_TIME;
        audio.play().then(() => {
            audioStarted = true;
            audioIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
            clickOverlay.classList.add('hidden');
        }).catch(() => {
            // ถ้าไม่ได้ ให้แสดง overlay บังคับให้คลิก
            audio.muted = true;
            audio.play(); // เล่นแบบ muted ไว้ก่อน
        });
    });

    // เทคนิค 3: Click Overlay - บังคับให้ผู้ใช้คลิก
    clickOverlay.addEventListener('click', startAudio);

    // เทคนิค 4: รองรับการกด spacebar หรือ enter
    document.addEventListener('keydown', (e) => {
        if ((e.code === 'Space' || e.code === 'Enter') && !audioStarted) {
            e.preventDefault();
            startAudio();
        }
    });

    // เทคนิค 5: ดักจับการเคลื่อนไหวเมาส์/Touch ครั้งแรก
    let firstInteraction = false;
    ['mousemove', 'touchstart', 'scroll'].forEach(event => {
        document.addEventListener(event, () => {
            if (!firstInteraction && !audioStarted) {
                firstInteraction = true;
                startAudio();
            }
        }, { once: true, passive: true });
    });

    // ปุ่มควบคุมเพลง
    audioBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        
        if (!audioStarted) {
            startAudio();
        } else {
            if (audio.paused) {
                if (audio.currentTime < START_TIME) {
                    audio.currentTime = START_TIME;
                }
                audio.play();
                audioIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
            } else {
                audio.pause();
                audioIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
            }
        }
    });

    // อัพเดท Timer
    function updateTimer() {
        const diff = new Date('2026-02-22T00:00:00') - new Date();
        const d = Math.max(0, Math.floor(diff / 86400000));
        const h = Math.max(0, Math.floor((diff % 86400000) / 3600000));
        const m = Math.max(0, Math.floor((diff % 3600000) / 60000));
        const s = Math.max(0, Math.floor((diff % 60000) / 1000));
        document.getElementById('timer').innerText = `${d}d ${h}h ${m}m ${s}s`;
    }

    window.addEventListener('resize', init);
    init(); 
    draw(); 
    setInterval(updateTimer, 1000);
</script>
</body>
</html>